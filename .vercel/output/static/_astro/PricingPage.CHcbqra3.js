import{j as e,u as A,a as P,A as B,C as E}from"./CreditContext.Cd34fGmH.js";import{r as h}from"./index.D5cfIYOg.js";import{u as M,F as v,L as S,S as C,a as z}from"./useSubscription.Cs8u4hSB.js";function F(){return!0}function W({isOpen:s,onClose:b,onConfirm:p,title:N,message:w,confirmText:g="Confirm",cancelText:y="Cancel",type:k="danger",loading:m=!1}){const[f,c]=h.useState(!1);h.useEffect(()=>{if(s)c(!0),document.body.style.overflow="hidden";else{const d=setTimeout(()=>c(!1),150);return document.body.style.overflow="unset",()=>clearTimeout(d)}return()=>{document.body.style.overflow="unset"}},[s]);const r=d=>{d.target===d.currentTarget&&b()},x=d=>{d.key==="Escape"&&b(),d.key==="Enter"&&!m&&p()},n=(()=>{switch(k){case"danger":return{icon:e.jsx("svg",{className:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),iconBg:"bg-red-500/20",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500"};case"warning":return{icon:e.jsx("svg",{className:"w-6 h-6 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),iconBg:"bg-orange-500/20",confirmButton:"bg-orange-600 hover:bg-orange-700 focus:ring-orange-500"};case"info":return{icon:e.jsx("svg",{className:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),iconBg:"bg-blue-500/20",confirmButton:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}}})();return f?e.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 transition-all duration-150 ${s?"opacity-100":"opacity-0"}`,onClick:r,onKeyDown:x,tabIndex:-1,children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsx("div",{className:`relative w-full max-w-md transform transition-all duration-150 ${s?"scale-100 opacity-100":"scale-95 opacity-0"}`,children:e.jsxs("div",{className:"bg-slate-800 rounded-2xl shadow-2xl border border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"p-6 pb-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full ${n.iconBg} flex items-center justify-center`,children:n.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:N}),e.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:w})]})]})}),e.jsxs("div",{className:"px-6 py-4 bg-slate-900/50 flex gap-3 justify-end",children:[e.jsx("button",{onClick:b,disabled:m,className:"px-4 py-2 text-sm font-medium text-slate-300 hover:text-white bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:y}),e.jsxs("button",{onClick:p,disabled:m,className:`px-4 py-2 text-sm font-medium text-white rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 ${n.confirmButton} flex items-center gap-2`,children:[m&&e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),g]})]})]})})]}):null}function I(){const{subscription:s,isActive:b,isLoading:p,error:N,needsRenewal:w,daysUntilRenewal:g,cancelSubscription:y,getCustomerPortalUrl:k,refreshSubscription:m,formatStatus:f,canModifySubscription:c}=M(),[r,x]=h.useState(null),[L,n]=h.useState(null),[d,t]=h.useState(!1),i=async()=>{try{x("manage"),n(null);const a=await k();a?window.open(a,"_blank"):n("Unable to access customer portal")}catch(a){n(a instanceof Error?a.message:"Unknown error")}finally{x(null)}},l=()=>{t(!0)},o=async()=>{try{x("cancel"),n(null),t(!1),await y(),n(null)}catch(a){n(a instanceof Error?a.message:"Failed to cancel subscription")}finally{x(null)}},j=async()=>{try{x("refresh"),n(null),await m()}catch{n("Failed to refresh subscription status")}finally{x(null)}};if(p)return e.jsx("div",{className:"max-w-4xl mx-auto p-8 bg-slate-800/30 rounded-2xl border border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-violet-400/30 border-t-violet-400 rounded-full animate-spin"}),e.jsx("span",{className:"ml-3 text-slate-300",children:"Loading subscription information..."})]})});if(N)return e.jsx("div",{className:"max-w-4xl mx-auto p-8 bg-red-500/10 border border-red-500/30 rounded-2xl",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("svg",{className:"w-6 h-6 text-red-400 mt-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-300 font-medium mb-2",children:"Subscription Error"}),e.jsx("p",{className:"text-red-200 text-sm mb-4",children:N}),e.jsx("button",{onClick:j,disabled:r==="refresh",className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-300 rounded-lg transition-colors duration-200 disabled:opacity-50",children:r==="refresh"?"Refreshing...":"Retry"})]})]})});if(!s||!b)return null;const u=a=>{switch(a){case"active":return"text-green-400 bg-green-500/20 border-green-500/30";case"on_trial":return"text-blue-400 bg-blue-500/20 border-blue-500/30";case"cancelled":return"text-orange-400 bg-orange-500/20 border-orange-500/30";case"past_due":case"unpaid":return"text-red-400 bg-red-500/20 border-red-500/30";default:return"text-slate-400 bg-slate-500/20 border-slate-500/30"}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[w&&g&&e.jsx("div",{className:"p-6 bg-orange-500/10 border border-orange-500/30 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("svg",{className:"w-6 h-6 text-orange-400 mt-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-orange-300 font-medium mb-2",children:"Subscription Renewal Reminder"}),e.jsxs("p",{className:"text-orange-200 text-sm",children:["Your subscription will renew in ",g," day",g!==1?"s":"",". Make sure your payment method is up to date."]})]})]})}),e.jsxs("div",{className:"p-8 bg-gradient-to-br from-violet-500/10 to-blue-500/10 border border-violet-500/30 rounded-2xl",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Current Subscription"}),e.jsx("p",{className:"text-slate-300",children:"Manage your subscription and billing information"})]}),e.jsx("div",{className:`px-3 py-1 rounded-full border text-sm font-medium ${u(s.status)}`,children:f(s.status)})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Subscription Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Plan:"}),e.jsx("span",{className:"text-white font-medium",children:s.productName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Variant:"}),e.jsx("span",{className:"text-white",children:s.variantName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Credits:"}),e.jsxs("span",{className:"text-violet-400 font-medium",children:[s.credits.toLocaleString(),"/month"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Status:"}),e.jsx("span",{className:"text-white",children:s.statusFormatted})]})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Billing Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Next Renewal:"}),e.jsx("span",{className:"text-white",children:s.renewsAt.toLocaleDateString()})]}),s.endsAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Ends At:"}),e.jsx("span",{className:"text-orange-400",children:s.endsAt.toLocaleDateString()})]}),s.trialEndsAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Trial Ends:"}),e.jsx("span",{className:"text-blue-400",children:s.trialEndsAt.toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Payment Method:"}),e.jsxs("span",{className:"text-white",children:[s.cardBrand," •••• ",s.cardLastFour]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Auto-Renewal:"}),e.jsx("span",{className:s.cancelled?"text-orange-400":"text-green-400",children:s.cancelled?"Cancelled":"Active"})]})]})]})})]}),L&&e.jsx("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-300 font-medium",children:"Action Failed"}),e.jsx("p",{className:"text-red-200 text-sm mt-1",children:L}),e.jsx("button",{onClick:()=>n(null),className:"text-red-300 hover:text-red-200 text-sm mt-2 underline",children:"Dismiss"})]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("button",{onClick:i,disabled:!!r,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-violet-500 to-blue-500 text-white rounded-xl font-semibold hover:from-violet-600 hover:to-blue-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[r==="manage"&&e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),r==="manage"?"Opening...":"Update Payment & Billing"]}),e.jsxs("button",{onClick:j,disabled:!!r,className:"flex items-center gap-2 px-6 py-3 bg-slate-700 text-white rounded-xl font-semibold hover:bg-slate-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[r==="refresh"&&e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r==="refresh"?"Refreshing...":"Refresh Status"]}),c(s.status)&&!s.cancelled&&e.jsxs("button",{onClick:l,disabled:!!r,className:"flex items-center gap-2 px-6 py-3 bg-red-600/20 text-red-300 border border-red-500/30 rounded-xl font-semibold hover:bg-red-600/30 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[r==="cancel"&&e.jsx("div",{className:"w-4 h-4 border-2 border-red-300/30 border-t-red-300 rounded-full animate-spin"}),e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),r==="cancel"?"Cancelling...":"Cancel Subscription"]})]}),s.cancelled&&s.endsAt&&e.jsx("div",{className:"mt-6 p-4 bg-orange-500/10 border border-orange-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-orange-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-300 font-medium",children:"Subscription Cancelled"}),e.jsxs("p",{className:"text-orange-200 text-sm mt-1",children:["Your subscription has been cancelled and will end on ",s.endsAt.toLocaleDateString(),". You will retain access to premium features until then."]})]})]})})]}),e.jsx("div",{className:"p-6 bg-blue-500/10 border border-blue-500/20 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-400 mt-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-400 font-medium mb-2",children:"Available Actions"}),e.jsxs("ul",{className:"text-blue-300 space-y-1 text-sm",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:'"Update Payment & Billing"'})," - Change payment methods, update billing address, download invoices"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:'"Refresh Status"'})," - Get the latest subscription information from our servers"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:'"Cancel Subscription"'})," - End your subscription (remains active until period end)"]}),e.jsx("li",{children:"• Contact support if you need assistance with your subscription"})]})]})]})})]}),e.jsx(W,{isOpen:d,onClose:()=>t(!1),onConfirm:o,title:"Cancel Subscription",message:"Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your billing period.",confirmText:"Yes, Cancel Subscription",cancelText:"Keep Subscription",type:"danger",loading:r==="cancel"})]})}function R(){const{user:s}=A(),{credits:b}=P(),{isActive:p,isLoading:N}=M(),[w,g]=h.useState(null),[y,k]=h.useState(!1),[m,f]=h.useState(null),[c,r]=h.useState("idle"),x=()=>{if(!s){f("Please log in first to use the free trial");return}window.location.href="/analyze?plan=free"},L=async t=>{try{k(!0),f(null),g(t),r("processing"),F();const i=S.getInstance();if(!s)throw new Error("Please log in first before subscribing to a plan");const l={userId:s.id,userEmail:s.email||"",userName:s.user_metadata?.full_name||s.email?.split("@")[0]||""},o=await i.createCheckout(t,l);if(!o?.data?.attributes?.url)throw new Error("Checkout session creation failed: missing payment link");r("redirecting");const j=C[t];sessionStorage.setItem("pendingPayment",JSON.stringify({planId:t,checkoutId:o.data.id,timestamp:Date.now(),credits:j.credits,type:"subscription"})),await new Promise(u=>setTimeout(u,1e3)),window.location.href=o.data.attributes.url}catch(i){console.error("💳 Subscription initiation failed:",i),r("failed");let l="Subscription initialization failed, please try again later";if(i instanceof z)switch(i.code){case"MISSING_API_KEY":case"MISSING_VARIANT_ID":case"SERVICE_NOT_CONFIGURED":l="Payment service configuration error, please contact customer service";break;case"INVALID_PLAN_ID":l="Selected plan is invalid, please choose again";break;case"CHECKOUT_CREATION_FAILED":l="Failed to create payment session, please try again later";break;default:l=i.message||"Payment service is temporarily unavailable"}else i instanceof Error&&(l=i.message);f(l)}finally{k(!1),g(null)}},n=Object.values(C),d=t=>{const i=t.price/t.credits,l=Math.floor(t.credits/60),o=t.price/l;return{pricePerCredit:i.toFixed(4),minutesOfAnalysis:l,pricePerMinute:o.toFixed(2)}};return N?e.jsx("div",{className:"relative bg-gradient-to-b py-20",children:e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-center py-20",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-violet-400/30 border-t-violet-400 rounded-full animate-spin"}),e.jsx("span",{className:"ml-3 text-slate-300",children:"Loading subscription information..."})]})})}):s&&p?e.jsxs("div",{className:"relative bg-gradient-to-b py-20",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-violet-500/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-blue-500/10 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h1",{className:"text-5xl lg:text-6xl font-bold text-white mb-6 tracking-tight",children:"Subscription Management"}),e.jsx("p",{className:"text-xl text-slate-300 leading-relaxed mb-8 max-w-3xl mx-auto",children:"Manage your active subscription, view billing information, and update your plan settings."}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-800/50 rounded-full border border-slate-700 mb-8",children:[e.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),e.jsx("span",{className:"text-slate-300",children:"Current Credits:"}),e.jsx("span",{className:"text-green-400 font-semibold",children:b.toLocaleString()})]})]}),e.jsx(I,{})]})]}):e.jsxs("div",{className:"relative bg-gradient-to-b py-20",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-violet-500/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-blue-500/10 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h1",{className:"text-5xl lg:text-6xl font-bold text-white mb-6 tracking-tight",children:"Choose Your Subscription Plan"}),e.jsx("p",{className:"text-xl text-slate-300 leading-relaxed mb-8 max-w-3xl mx-auto",children:"Start with a free trial or choose a monthly subscription plan that fits your needs. Professional AI audio analysis service, pay monthly, cancel anytime."}),s&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-800/50 rounded-full border border-slate-700 mb-8",children:[e.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),e.jsx("span",{className:"text-slate-300",children:"Current Credits:"}),e.jsx("span",{className:"text-green-400 font-semibold",children:b.toLocaleString()})]})]}),(c==="processing"||c==="redirecting")&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"bg-slate-800 rounded-2xl p-8 shadow-2xl border border-slate-700 max-w-md mx-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-violet-400/30 border-t-violet-400 rounded-full animate-spin flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold mb-1",children:c==="processing"?"Processing Subscription":"Redirecting to Payment"}),e.jsx("p",{className:"text-slate-300 text-sm",children:c==="processing"?"Creating your subscription session...":"Redirecting to secure payment page..."})]})]})})}),m&&e.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-md",children:e.jsx("div",{className:"bg-red-500/90 backdrop-blur-sm text-white p-4 rounded-xl shadow-2xl border border-red-400/30",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-200 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium mb-1",children:"Subscription Error"}),e.jsx("p",{className:"text-red-100 text-sm",children:m})]}),e.jsx("button",{onClick:()=>{f(null),r("idle")},className:"text-red-200 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}),s&&p&&e.jsx("div",{className:"max-w-4xl mx-auto mb-12 p-6 bg-green-500/10 border border-green-500/30 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("svg",{className:"w-6 h-6 text-green-400 mt-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-green-300 font-medium mb-2",children:"You Have an Active Subscription"}),e.jsx("p",{className:"text-green-200 text-sm mb-4",children:"You currently have an active subscription. You cannot subscribe to additional plans while your current subscription is active."}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"px-4 py-2 bg-green-500/20 hover:bg-green-500/30 text-green-300 rounded-lg transition-colors duration-200 text-sm",children:"Manage Current Subscription"}),e.jsx("a",{href:"/analyze",className:"px-4 py-2 bg-green-500/20 hover:bg-green-500/30 text-green-300 rounded-lg transition-colors duration-200 text-sm",children:"Start Analyzing"})]})]})]})}),e.jsxs("div",{className:"grid lg:grid-cols-4 md:grid-cols-2 gap-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"relative p-8 rounded-2xl border border-green-500/30 bg-gradient-to-br from-green-500/5 to-emerald-500/5 hover:scale-105 transition-all duration-300 cursor-pointer flex flex-col h-full",children:[e.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:e.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white text-sm font-medium px-4 py-2 rounded-full",children:"Free Trial"})}),e.jsxs("div",{className:"text-center flex-grow flex flex-col",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:v.name}),e.jsx("p",{className:"text-slate-400 text-sm mb-6",children:v.description}),e.jsxs("div",{className:"mb-6",children:[e.jsx("span",{className:"text-4xl font-bold text-white",children:"Free"}),e.jsx("div",{className:"text-slate-400 text-sm mt-1",children:"Forever Free"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-2",children:["Not logged in: ",v.credits," credits"]}),e.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-2",children:["Logged in: ",v.creditsLoggedIn," credits/month"]}),e.jsxs("div",{className:"text-slate-400 text-sm",children:["Logged in users get about ",Math.floor(v.creditsLoggedIn/60)," minutes of audio analysis"]})]}),e.jsxs("div",{className:"mb-8 space-y-3 text-left flex-grow",children:[v.features.map((t,i)=>e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-300",children:[e.jsx("svg",{className:"w-4 h-4 text-green-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),t]},i)),v.limitations.map((t,i)=>e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-400",children:[e.jsx("svg",{className:"w-4 h-4 text-slate-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),t]},`limit-${i}`))]}),e.jsx("div",{className:"mt-auto",children:e.jsx("button",{onClick:x,className:"w-full py-4 px-6 rounded-xl font-semibold transition-all duration-300 bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 shadow-lg hover:shadow-xl hover:shadow-green-500/25",children:"Start Free"})})]})]}),n.map(t=>{const i=d(t),l=y&&w===t.id,o=y&&w!==t.id,j=t.popular;return e.jsxs("div",{className:`relative p-8 rounded-2xl border transition-all duration-300 flex flex-col h-full ${o?"opacity-50 cursor-not-allowed":"hover:scale-105 cursor-pointer"} ${j?"border-violet-500/50 bg-gradient-to-br from-violet-500/10 to-blue-500/10 shadow-xl shadow-violet-500/20":"border-slate-700 bg-slate-800/30 hover:border-slate-600"}`,children:[j&&e.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:e.jsx("span",{className:"bg-gradient-to-r from-violet-500 to-blue-500 text-white text-sm font-medium px-4 py-2 rounded-full",children:"Most Popular"})}),e.jsxs("div",{className:"text-center flex-grow flex flex-col",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:t.name}),e.jsx("p",{className:"text-slate-400 text-sm mb-6",children:t.description}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("span",{className:"text-4xl font-bold text-white",children:["$",t.price]}),e.jsx("span",{className:"text-slate-400 text-sm ml-2",children:"/month"}),e.jsx("div",{className:"text-slate-500 text-xs mt-1",children:"Auto-renews monthly, cancel anytime"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"text-3xl font-bold text-violet-400 mb-2",children:[t.credits.toLocaleString()," credits/month"]}),e.jsxs("div",{className:"text-slate-400 text-sm",children:["About ",i.minutesOfAnalysis," minutes of audio analysis"]}),e.jsxs("div",{className:"text-slate-500 text-xs mt-1",children:["$",i.pricePerMinute,"/minute"]})]}),e.jsxs("div",{className:"mb-8 space-y-3 text-left flex-grow",children:[t.features.map((u,a)=>e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-300",children:[e.jsx("svg",{className:"w-4 h-4 text-green-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),u]},a)),t.audioFormats&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-2",children:"Supported formats:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.audioFormats.map((u,a)=>e.jsx("span",{className:"px-2 py-1 bg-slate-700/50 text-xs text-slate-300 rounded",children:u},a))})]}),t.exportFormats&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-2",children:"Export formats:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.exportFormats.map((u,a)=>e.jsx("span",{className:"px-2 py-1 bg-violet-500/20 text-xs text-violet-300 rounded",children:u},a))})]})]}),e.jsx("div",{className:"mt-auto",children:s&&p?e.jsxs("button",{disabled:!0,className:"w-full py-4 px-6 rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-2 bg-slate-600/50 text-slate-400 cursor-not-allowed",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Already Subscribed"]}):e.jsxs("button",{onClick:()=>!o&&L(t.id),disabled:o,className:`w-full py-4 px-6 rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-2 ${j?"bg-gradient-to-r from-violet-500 to-blue-500 text-white hover:from-violet-600 hover:to-blue-600 disabled:from-violet-500/50 disabled:to-blue-500/50 shadow-lg hover:shadow-xl hover:shadow-violet-500/25":"bg-slate-700 text-white hover:bg-slate-600 disabled:bg-slate-700/50"} disabled:cursor-not-allowed`,children:[l&&e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),l?c==="redirecting"?"Redirecting...":"Processing...":"Start Subscription"]})})]})]},t.id)})]}),e.jsxs("div",{className:"mt-16 max-w-4xl mx-auto grid md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"p-6 bg-blue-500/10 border border-blue-500/20 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-400 mt-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-400 font-medium mb-2",children:"Subscription Details"}),e.jsxs("ul",{className:"text-blue-300 space-y-1 text-sm",children:[e.jsx("li",{children:"• Payment securely processed by Lemonsqueezy, supports credit cards, PayPal, etc."}),e.jsx("li",{children:"• Auto-renews monthly, credits allocated to account monthly"}),e.jsx("li",{children:"• 1 credit = 1 second of audio analysis, deducted based on actual usage"}),e.jsx("li",{children:"• Cancel subscription anytime in customer portal, no penalty fees"})]})]})]})}),e.jsx("div",{className:"p-6 bg-violet-500/10 border border-violet-500/20 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("svg",{className:"w-6 h-6 text-violet-400 mt-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-violet-400 font-medium mb-2",children:"Monthly Subscription Benefits"}),e.jsxs("ul",{className:"text-violet-300 space-y-1 text-sm",children:[e.jsx("li",{children:"• Fixed monthly credit allowance for more regular usage"}),e.jsx("li",{children:"• Lower monthly cost, more cash flow friendly"}),e.jsx("li",{children:"• Auto-renewal, no manual top-ups needed"}),e.jsx("li",{children:"• Flexible cancellation, no long-term contract commitment"})]})]})]})})]}),!S.getInstance().isConfigured()&&e.jsx("div",{className:"mt-8 max-w-2xl mx-auto p-6 bg-blue-500/10 border border-blue-500/20 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-500/20 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-blue-400 mb-2",children:"Subscription System Configuration"}),e.jsx("p",{className:"text-blue-300 mb-4",children:"We are configuring a secure subscription system and will soon provide monthly subscription services."}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-200",children:[e.jsx("p",{children:"• Support for multiple secure payment methods"}),e.jsx("p",{children:"• Automatic monthly credit allocation"}),e.jsx("p",{children:"• Cancel subscription anytime"})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-blue-500/20",children:[e.jsx("p",{className:"text-blue-300 text-sm",children:"For immediate subscription, please contact customer service:"}),e.jsxs("a",{href:"/contact",className:"inline-flex items-center gap-2 mt-2 px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 rounded-lg transition-colors duration-200",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Contact Support"]})]})]})})]})]})}function $(){return e.jsx(B,{children:e.jsx(E,{children:e.jsx(R,{})})})}export{$ as default};
