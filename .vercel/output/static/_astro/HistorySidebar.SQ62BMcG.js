const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/CreditContext.Cd34fGmH.js","_astro/index.D5cfIYOg.js"])))=>i.map(i=>d[i]);
import{_ as E,j as e,u as T,a as V}from"./CreditContext.Cd34fGmH.js";import{r as j,R as z}from"./index.D5cfIYOg.js";import{U as $}from"./UserAccountDropdown.Byx-syBn.js";const M="describe_music_history",U=50;class H{static getHistory(){if(typeof window>"u")return[];try{const t=localStorage.getItem(M);return t?JSON.parse(t):[]}catch(t){return console.error("Error reading history from localStorage:",t),[]}}static getUserHistory(t){return this.getHistory().filter(i=>i.userId===t)}static getAnonymousHistory(){return this.getHistory().filter(a=>!a.userId)}static async getCurrentUserHistory(){try{const{supabase:t}=await E(async()=>{const{supabase:i}=await import("./CreditContext.Cd34fGmH.js").then(r=>r.e);return{supabase:i}},__vite__mapDeps([0,1])),{data:{user:a}}=await t.auth.getUser();return a?this.getUserHistory(a.id):this.getAnonymousHistory()}catch(t){return console.error("Error getting current user history:",t),this.getAnonymousHistory()}}static addRecord(t){if(!(typeof window>"u"))try{const a=this.getHistory(),r=[t,...a].slice(0,U);localStorage.setItem(M,JSON.stringify(r))}catch(a){console.error("Error saving to localStorage:",a)}}static async addRecordWithUser(t){if(!(typeof window>"u"))try{let a;try{const{supabase:r}=await E(async()=>{const{supabase:h}=await import("./CreditContext.Cd34fGmH.js").then(n=>n.e);return{supabase:h}},__vite__mapDeps([0,1])),{data:{user:d}}=await r.auth.getUser();a=d?.id}catch(r){}const i={...t,userId:a};this.addRecord(i)}catch(a){console.error("Error adding record with user:",a)}}static removeRecord(t){if(!(typeof window>"u"))try{const i=this.getHistory().filter(r=>r.id!==t);localStorage.setItem(M,JSON.stringify(i))}catch(a){console.error("Error removing from localStorage:",a)}}static clearHistory(){if(!(typeof window>"u"))try{localStorage.removeItem(M)}catch(t){console.error("Error clearing localStorage:",t)}}static clearUserHistory(t){if(!(typeof window>"u"))try{const i=this.getHistory().filter(r=>r.userId!==t);localStorage.setItem(M,JSON.stringify(i))}catch(a){console.error("Error clearing user history:",a)}}static async migrateAnonymousHistoryToUser(t){if(typeof window>"u")return 0;try{const a=this.getHistory();let i=0;const r=a.map(d=>d.userId?d:(i++,{...d,userId:t}));return i>0&&(localStorage.setItem(M,JSON.stringify(r)),`${i}${t}`),i}catch(a){return console.error("Error migrating anonymous history:",a),0}}static getUserHistoryStats(t){const a=t?this.getUserHistory(t):this.getAnonymousHistory();if(a.length===0)return{totalRecords:0,totalDuration:0,averageQuality:0,mostCommonGenre:"Unknown",mostCommonMood:"Unknown"};const i=a.reduce((u,l)=>u+l.duration,0),r=a.reduce((u,l)=>u+l.quickStats.qualityScore,0)/a.length,d={};a.forEach(u=>{const l=u.basicInfo.genre||"Unknown";d[l]=(d[l]||0)+1});const h=Object.keys(d).reduce((u,l)=>d[u]>d[l]?u:l,"Unknown"),n={};a.forEach(u=>{const l=u.basicInfo.mood||"Unknown";n[l]=(n[l]||0)+1});const p=Object.keys(n).reduce((u,l)=>n[u]>n[l]?u:l,"Unknown");return{totalRecords:a.length,totalDuration:i,averageQuality:r,mostCommonGenre:h,mostCommonMood:p}}static getRecordById(t){return this.getHistory().find(i=>i.id===t)||null}static generateThumbnail(t){return new Promise(a=>{const i=document.createElement("canvas");i.width=200,i.height=60;const r=i.getContext("2d");r.fillStyle="rgba(139, 92, 246, 0.3)",r.fillRect(0,0,i.width,i.height),r.strokeStyle="rgba(139, 92, 246, 1)",r.lineWidth=1,r.beginPath();for(let d=0;d<i.width;d+=2){const h=Math.random()*i.height*.8+i.height*.1;d===0?r.moveTo(d,h):r.lineTo(d,h)}r.stroke(),a(i.toDataURL())})}}const D=({result:s})=>{const{voiceAnalysis:t}=s;if(!t||!t.hasVoice)return e.jsx("div",{className:"p-6 text-center",children:e.jsxs("div",{className:"glass-pane p-8",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-slate-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No Voice Detected"}),e.jsx("p",{className:"text-slate-400",children:"This audio doesn't contain detectable speech or voice content. Voice analysis is available for podcasts, interviews, speeches, and other vocal content."})]})});const a=(n,p)=>p<.3?"bg-white/20":p<.6?"bg-blue-400":"bg-blue-500",i=n=>n>=.8?"text-green-300 bg-green-500/20":n>=.6?"text-yellow-300 bg-yellow-500/20":"text-red-300 bg-red-500/20",r=n=>{switch(n){case"male":return"text-blue-300 bg-blue-500/20";case"female":return"text-pink-300 bg-pink-500/20";default:return"text-slate-300 bg-slate-500/20"}},d=n=>`${Math.round(n*100)}%`,h=n=>`${Math.round(n*100)}%`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-pane p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),"Voice Detection"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Speaker Count"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:t.speakerCount})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Primary Gender"}),e.jsx("div",{className:`inline-flex px-2 py-1 rounded-full text-sm font-medium ${r(t.genderDetection.primary)}`,children:t.genderDetection.primary==="unknown"?"Unknown":t.genderDetection.primary.charAt(0).toUpperCase()+t.genderDetection.primary.slice(1)}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[d(t.genderDetection.confidence)," confidence"]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Multiple Speakers"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:t.genderDetection.multipleGenders?"Yes":"No"})]})]})]}),e.jsxs("div",{className:"glass-pane p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Speaker Emotion Analysis"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Primary Emotion"}),e.jsx("span",{className:"text-lg font-bold text-purple-400 capitalize",children:t.speakerEmotion.primary})]}),e.jsxs("div",{className:"text-sm text-slate-400",children:[d(t.speakerEmotion.confidence)," confidence"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(t.speakerEmotion.emotions).map(([n,p])=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1 capitalize",children:n}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1 bg-white/20 rounded-full h-2 mr-2",children:e.jsx("div",{className:`h-2 rounded-full ${a(n,p)}`,style:{width:`${Math.max(p*100,2)}%`}})}),e.jsx("span",{className:"text-xs font-medium text-slate-300",children:h(p)})]})]},n))})]}),e.jsxs("div",{className:"glass-pane p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Speech Clarity Score"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Overall Score"}),e.jsx("div",{className:`inline-flex px-3 py-1 rounded-full text-lg font-bold ${i(t.speechClarity.score)}`,children:h(t.speechClarity.score)})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Pronunciation"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:h(t.speechClarity.pronunciation)})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Articulation"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:h(t.speechClarity.articulation)})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Speaking Pace"}),e.jsx("div",{className:"text-lg font-semibold text-white capitalize",children:t.speechClarity.pace})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Volume Level"}),e.jsx("div",{className:"text-lg font-semibold text-white capitalize",children:t.speechClarity.volume})]})]})]}),e.jsxs("div",{className:"glass-pane p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 3v10a1 1 0 001 1h8a1 1 0 001 1V7M7 7h10M7 10h6m-3 3h3"})}),"Vocal Characteristics"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Pitch Range"}),e.jsx("div",{className:"text-lg font-semibold text-white capitalize",children:t.vocalCharacteristics.pitchRange})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Speaking Rate"}),e.jsxs("div",{className:"text-lg font-semibold text-white",children:[t.vocalCharacteristics.speakingRate," WPM"]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Pause Frequency"}),e.jsx("div",{className:"text-lg font-semibold text-white capitalize",children:t.vocalCharacteristics.pauseFrequency})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Intonation Variation"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:h(t.vocalCharacteristics.intonationVariation)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass-pane p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})}),"Language Analysis"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Language"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:t.languageAnalysis.language||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Confidence"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:d(t.languageAnalysis.confidence)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Accent"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:t.languageAnalysis.accent||"Unknown"})]})]})]}),e.jsxs("div",{className:"glass-pane p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),"Audio Quality"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Overall Quality"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:h(t.audioQuality.overall)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Background Noise"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:h(t.audioQuality.backgroundNoise)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Echo Level"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:h(t.audioQuality.echo)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Compression"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:h(t.audioQuality.compression)})]})]})]})]})]})};function X({result:s}){const a=s.voiceAnalysis?.hasVoice?"voiceanalysis":s.soundEffects?.detected&&s.soundEffects.detected.length>0?"soundeffects":"overview",[i,r]=j.useState(a),[d,h]=j.useState(!1),n=l=>new Date(l).toLocaleString(),p=l=>{const{basicInfo:m,emotions:b}=l,y=Object.entries(b).reduce((v,o)=>b[v[0]]>b[o[0]]?v:o)[0];let x=`A ${b[y]>.7?"highly":b[y]>.5?"moderately":"subtly"} ${y} ${m.genre.toLowerCase()} track`;return m.bpm>140?x+=` with a fast-paced ${m.bpm} BPM rhythm`:m.bpm>100?x+=` with a moderate ${m.bpm} BPM tempo`:x+=` with a slow ${m.bpm} BPM groove`,m.energy>.8?x+=", delivering high energy":m.energy>.6?x+=", maintaining good energy levels":x+=", with a relaxed energy",m.danceability>.8?x+=" and strong danceability":m.danceability>.6&&(x+=" and moderate danceability"),x+=` in ${m.key}.`,x},u=[{id:"overview",label:"Overview",icon:"chart"},{id:"voiceanalysis",label:"Voice & Speech",icon:"microphone"},{id:"soundeffects",label:"Sound Effects",icon:"soundwave"},{id:"emotions",label:"Emotions",icon:"emotion"},{id:"structure",label:"Structure",icon:"structure"},{id:"quality",label:"Quality",icon:"lightning"},{id:"similarity",label:"Similarity",icon:"search"}];return e.jsxs("div",{className:"space-y-8","data-component":"dashboard",children:[e.jsx(G,{result:s}),e.jsx("div",{className:"glass-pane p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-violet-500 to-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-2 flex items-center gap-2",children:["AI Description",e.jsx("span",{className:"px-2 py-0.5 bg-violet-500/20 text-violet-300 text-xs rounded-full",children:"Auto-generated"})]}),e.jsx("p",{className:"text-slate-300 text-base leading-relaxed",children:s.aiDescription||p(s)}),e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(s.aiDescription||p(s)),h(!0),setTimeout(()=>h(!1),2e3)},className:`mt-3 inline-flex items-center gap-2 px-3 py-1.5 text-sm border rounded-md transition-all duration-300 ${d?"text-green-300 border-green-500/30 bg-green-500/10":"text-slate-400 hover:text-white border-slate-700 hover:border-slate-600"}`,children:[d?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),d?"Copied!":"Copy Description"]})]})]})}),e.jsx("div",{className:"glass-pane p-2",children:e.jsx("nav",{className:"flex space-x-1",children:u.map(l=>e.jsxs("button",{onClick:()=>r(l.id),className:`
                flex items-center gap-2 px-6 py-3 rounded-full text-sm font-medium transition-all duration-300
                ${i===l.id?"bg-gradient-to-r from-violet-500 to-blue-500 text-white":"text-slate-300 hover:text-white hover:bg-white/5"}
              `,children:[l.icon==="chart"&&e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),l.icon==="microphone"&&e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),l.icon==="soundwave"&&e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.636 15.364a5 5 0 000-7.072m-2.828 9.9a9 9 0 010-12.728M12 12v.01"})}),l.icon==="emotion"&&e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),l.icon==="structure"&&e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),l.icon==="lightning"&&e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),l.icon==="search"&&e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),l.label]},l.id))})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i==="overview"&&e.jsx(R,{result:s}),i==="voiceanalysis"&&s.voiceAnalysis&&e.jsx(D,{result:s}),i==="soundeffects"&&e.jsx(I,{result:s}),i==="emotions"&&e.jsx(P,{result:s}),i==="structure"&&e.jsx(O,{result:s}),i==="quality"&&e.jsx(_,{result:s}),i==="similarity"&&e.jsx(F,{result:s})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Q,{result:s}),e.jsx(q,{result:s})]})]}),e.jsxs("div",{className:"text-center text-slate-500 text-sm",children:["Analysis completed on ",n(s.timestamp)]})]})}function R({result:s}){const[t,a]=z.useState(!1);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-pane p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:"Musical Analysis"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300",children:"Genre"}),e.jsx("span",{className:"font-semibold text-white",children:s.basicInfo.genre})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300",children:"Mood"}),e.jsx("span",{className:"font-semibold text-white",children:s.basicInfo.mood})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300",children:"BPM"}),e.jsx("span",{className:"font-semibold text-white",children:s.basicInfo.bpm})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300",children:"Key"}),e.jsx("span",{className:"font-semibold text-white",children:s.basicInfo.key})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{label:"Energy",value:s.basicInfo.energy,color:"violet"}),e.jsx(C,{label:"Valence",value:s.basicInfo.valence,color:"blue"}),e.jsx(C,{label:"Danceability",value:s.basicInfo.danceability,color:"purple"})]})]})]}),e.jsx("div",{className:"glass-pane p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-2 flex items-center gap-2",children:["AI-Powered Tags",e.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-300 text-xs rounded-full",children:"SEO Ready"})]}),e.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Automatically generated tags for better searchability and categorization"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(s.tags||[]).map((i,r)=>e.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-500/10 text-green-400 text-sm rounded-full border border-green-500/20 hover:bg-green-500/15 transition-colors duration-200",children:i},r))}),e.jsxs("button",{onClick:()=>{const i=(s.tags||[]).join(", ");navigator.clipboard.writeText(i),a(!0),setTimeout(()=>a(!1),2e3)},className:`mt-4 inline-flex items-center gap-2 px-3 py-1.5 text-sm border rounded-md transition-all duration-300 ${t?"text-green-300 border-green-500/30 bg-green-500/10":"text-slate-400 hover:text-white border-slate-700 hover:border-slate-600"}`,children:[t?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),t?"Copied!":"Copy All Tags"]})]})]})})]})}function I({result:s}){const{contentType:t,soundEffects:a}=s;return a?.detected?.length&&a.detected.length>0,e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-pane p-8",children:[e.jsxs("h3",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.636 15.364a5 5 0 000-7.072m-2.828 9.9a9 9 0 010-12.728M12 12v.01"})})}),"Content Type Detection"]}),t?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-6 bg-gradient-to-r from-green-500/10 to-blue-500/10 rounded-xl border border-green-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-lg font-semibold text-white capitalize",children:t.primary.replace("-"," ")}),e.jsxs("span",{className:"px-3 py-1 bg-green-500/20 text-green-300 text-sm rounded-full",children:[Math.round(t.confidence*100),"% confidence"]})]}),e.jsx("p",{className:"text-slate-300",children:t.description})]})}):e.jsx("div",{className:"p-6 bg-slate-700/30 rounded-xl",children:e.jsx("p",{className:"text-slate-400",children:"Content type detection not available for this analysis."})})]}),a?.detected&&a.detected.length>0&&e.jsxs("div",{className:"glass-pane p-8",children:[e.jsxs("h3",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),"Detected Sounds"]}),e.jsx("div",{className:"space-y-4",children:a.detected.map((i,r)=>e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${W(i.category)}`,children:i.category}),e.jsx("span",{className:"font-semibold text-white",children:i.type})]}),e.jsxs("span",{className:"text-slate-300 text-sm",children:[Math.round(i.confidence*100),"% confidence"]})]}),e.jsx("p",{className:"text-slate-300 text-sm mb-2",children:i.description}),e.jsxs("div",{className:"text-xs text-slate-400",children:[B(i.timestamp.start)," - ",B(i.timestamp.end)]})]},r))})]}),a?.environment&&e.jsxs("div",{className:"glass-pane p-8",children:[e.jsxs("h3",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-teal-500 to-cyan-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"Environment Analysis"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300",children:"Location Type"}),e.jsx("span",{className:"font-semibold text-white capitalize",children:a.environment.location_type.replace("_"," ")})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300",children:"Setting"}),e.jsx("span",{className:"font-semibold text-white capitalize",children:a.environment.setting})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300",children:"Activity Level"}),e.jsx("span",{className:"font-semibold text-white capitalize",children:a.environment.activity_level})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300",children:"Acoustic Space"}),e.jsx("span",{className:"font-semibold text-white capitalize",children:a.environment.acoustic_space})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300",children:"Time of Day"}),e.jsx("span",{className:"font-semibold text-white capitalize",children:a.environment.time_of_day})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300",children:"Weather"}),e.jsx("span",{className:"font-semibold text-white capitalize",children:a.environment.weather})]})]})]})]}),(!a?.detected||a.detected.length===0)&&e.jsx("div",{className:"glass-pane p-8",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-700/50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:"No Specific Sound Effects Detected"}),e.jsx("p",{className:"text-slate-300",children:"This appears to be primarily musical content. Sound effect detection is most effective with environmental audio, speech, or mixed content."})]})})]})}function W(s){return{nature:"bg-green-500/20 text-green-300",urban:"bg-blue-500/20 text-blue-300",indoor:"bg-purple-500/20 text-purple-300",mechanical:"bg-orange-500/20 text-orange-300",human:"bg-pink-500/20 text-pink-300",animal:"bg-teal-500/20 text-teal-300",event:"bg-red-500/20 text-red-300"}[s]||"bg-slate-500/20 text-slate-300"}function B(s){const t=Math.floor(s/60),a=Math.floor(s%60);return`${t}:${a.toString().padStart(2,"0")}`}function P({result:s}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"glass-pane p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:"Emotional Analysis"}),e.jsx("div",{className:"space-y-4",children:Object.entries(s.emotions).map(([t,a])=>e.jsx(C,{label:t.charAt(0).toUpperCase()+t.slice(1),value:a,color:"violet"},t))})]})})}function O({result:s}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"glass-pane p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:"Song Structure"}),e.jsx("div",{className:"space-y-3",children:Object.entries(s.structure).map(([t,a])=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[e.jsx("span",{className:"font-medium text-white capitalize",children:t}),e.jsxs("span",{className:"text-slate-300",children:[Math.floor(a.start/60),":",(a.start%60).toString().padStart(2,"0")," - ",Math.floor(a.end/60),":",(a.end%60).toString().padStart(2,"0")]})]},t))})]})})}function _({result:s}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"glass-pane p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:"Audio Quality"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{label:"Overall Score",value:s.quality.overall/10,color:"violet"}),e.jsx(C,{label:"Clarity",value:s.quality.clarity/10,color:"blue"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300",children:"Loudness"}),e.jsxs("span",{className:"font-semibold text-white",children:[s.quality.loudness," dB"]})]}),e.jsx(C,{label:"Dynamic Range",value:s.quality.dynamic_range/10,color:"purple"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-300",children:"Noise Level"}),e.jsxs("span",{className:"font-semibold text-white",children:[s.quality.noise_level,"%"]})]})]})]})})}function F({result:s}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"glass-pane p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:"Similar Tracks"}),e.jsx("div",{className:"space-y-4",children:s.similarity.similar_tracks.map((t,a)=>e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white",children:t.title}),e.jsx("p",{className:"text-slate-400 text-sm",children:t.artist})]}),e.jsxs("span",{className:"text-violet-400 font-semibold",children:[Math.round(t.similarity*100),"%"]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-violet-500 to-blue-500 h-2 rounded-full",style:{width:`${t.similarity*100}%`}})})]},a))})]})})}function Q({result:s}){return e.jsxs("div",{className:"glass-pane p-6",children:[e.jsx("h4",{className:"text-lg font-bold text-white mb-4",children:"File Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Duration"}),e.jsxs("span",{className:"text-white",children:[Math.floor(s.duration/60),":",(s.duration%60).toString().padStart(2,"0")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Size"}),e.jsx("span",{className:"text-white",children:s.fileSize})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Format"}),e.jsx("span",{className:"text-white",children:s.format})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Analysis ID"}),e.jsx("span",{className:"text-white font-mono text-sm",children:s.id})]})]})]})}function q({result:s}){return e.jsxs("div",{className:"glass-pane p-6",children:[e.jsx("h4",{className:"text-lg font-bold text-white mb-4",children:"Quick Stats"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-violet-400",children:s.basicInfo.bpm}),e.jsx("div",{className:"text-xs text-slate-400",children:"BPM"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[Math.round(s.basicInfo.energy*100),"%"]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Energy"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:[Math.round(s.quality.overall*10),"/10"]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Quality"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[Math.round(s.basicInfo.danceability*100),"%"]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Dance"})]})]})]})}function C({label:s,value:t,color:a}){const i={violet:"from-violet-500 to-violet-400",blue:"from-blue-500 to-blue-400",purple:"from-purple-500 to-purple-400"};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-slate-300",children:s}),e.jsxs("span",{className:"font-semibold text-white",children:[Math.round(t*100),"%"]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:e.jsx("div",{className:`bg-gradient-to-r ${i[a]} h-2 rounded-full transition-all duration-500`,style:{width:`${t*100}%`}})})]})}function G({result:s}){const[t,a]=j.useState(!1),[i,r]=j.useState(0),[d,h]=j.useState(s.duration),n=z.useRef(null);z.useEffect(()=>{s.audioUrl,s.audioUrl?.substring(0,100)+"",s.filename},[s.audioUrl]);const p=x=>{const v=Math.floor(x/60),o=Math.floor(x%60);return`${v}:${o.toString().padStart(2,"0")}`},u=(x,v=60)=>{if(x.length<=v)return x;const o=x.lastIndexOf(".");if(o>0&&x.length-o<=10){const g=x.substring(0,o),S=x.substring(o),c=v-S.length-3;if(c>10)return`${g.substring(0,c)}...${S}`}return`${x.substring(0,v-3)}...`},l=()=>{n.current&&(t?n.current.pause():n.current.play(),a(!t))},m=()=>{n.current&&r(n.current.currentTime)},b=()=>{n.current&&h(n.current.duration)},y=x=>{const v=parseFloat(x.target.value);n.current&&(n.current.currentTime=v,r(v))},w=d>0?i/d*100:0;return e.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-gradient-to-br from-slate-900/80 via-slate-800/80 to-slate-900/80 backdrop-blur-xl border border-white/10",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-violet-500/5 via-blue-500/5 to-purple-500/5"}),e.jsx("div",{className:"relative p-5",children:s.audioUrl?e.jsxs(e.Fragment,{children:[e.jsx("audio",{ref:n,src:s.audioUrl,onTimeUpdate:m,onLoadedMetadata:b,onEnded:()=>a(!1),onPlay:()=>a(!0),onPause:()=>a(!1)}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-shrink-0 group",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-violet-500 via-blue-500 to-purple-500 rounded-lg flex items-center justify-center shadow-lg transition-all duration-200",children:e.jsx("svg",{className:`w-8 h-8 text-white transition-opacity duration-200 ${t?"opacity-30":"opacity-100"}`,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"})})}),e.jsx("button",{onClick:l,className:`absolute inset-0 rounded-lg flex items-center justify-center transition-all duration-200 ${t?"bg-black/20 hover:bg-black/40":"bg-black/0 hover:bg-black/40 group-hover:bg-black/30"}`,children:t?e.jsx("svg",{className:"w-8 h-8 text-white drop-shadow-lg",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):e.jsx("svg",{className:`w-8 h-8 text-white ml-0.5 drop-shadow-lg transition-opacity duration-200 ${t?"opacity-100":"opacity-0 group-hover:opacity-100"}`,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}),t&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-base font-bold text-white mb-1 truncate",title:s.filename,children:u(s.filename,60)}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[e.jsx("span",{className:"px-1.5 py-0.5 bg-white/10 rounded text-xs",children:s.format?.toUpperCase()}),e.jsx("span",{children:"•"}),e.jsx("span",{children:s.fileSize}),e.jsx("span",{children:"•"}),e.jsx("span",{children:p(s.duration)})]})]}),e.jsxs("div",{className:"relative group mb-2",children:[e.jsx("div",{className:"w-full h-1.5 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-purple-500 transition-all duration-300 ease-out rounded-full",style:{width:`${w}%`}})}),e.jsx("input",{type:"range",min:"0",max:d,value:i,onChange:y,className:"absolute inset-0 w-full h-1.5 opacity-0 cursor-pointer"}),e.jsx("div",{className:"absolute top-1/2 w-3 h-3 bg-white rounded-full shadow-lg transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",style:{left:`calc(${w}% - 6px)`}})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[e.jsx("span",{className:"font-mono",children:p(i)}),e.jsx("span",{className:"font-mono",children:p(d)})]})]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-700/50 rounded-xl flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-slate-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",title:s.filename,children:u(s.filename,45)}),e.jsxs("p",{className:"text-slate-400 text-sm mb-4",children:[p(s.duration)," • ",s.fileSize," • ",s.format]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-500/10 border border-amber-500/20 rounded-full text-amber-400 text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})}),"Audio playback not available for this analysis"]}),e.jsx("p",{className:"text-slate-500 text-xs max-w-md mx-auto",children:"This is a historical record. Audio playback is only available for new analyses. Please upload and analyze the file again to enable playback."})]})]})})]})}function Z(){const{user:s,signOut:t,usageStatus:a}=T();let i=0,r=!1;try{const c=V();i=c.credits,r=c.loading}catch{}const[d,h]=j.useState(!1),[n,p]=j.useState(!1),[u,l]=j.useState(!1),[m,b]=j.useState(!1);j.useEffect(()=>{const c=()=>{p(!0)},f=()=>{p(!1)},N=()=>{(!!window.currentAnalysisResult||!!window.backupAnalysisResult)&&p(!0)};return window.addEventListener("analysisResultReady",c),window.addEventListener("analysisResultCleared",f),setTimeout(N,100),()=>{window.removeEventListener("analysisResultReady",c),window.removeEventListener("analysisResultCleared",f)}},[]);const y=()=>{const f=window.currentAnalysisResult||window.backupAnalysisResult;return f||{filename:"no-analysis-available.mp3",timestamp:new Date().toISOString(),duration:0,format:"Unknown",basicInfo:{genre:"Unknown",mood:"Unknown",bpm:0},emotions:{happy:0,sad:0,angry:0,calm:0,excited:0},quality:{overall:0,clarity:0},tags:["no-analysis-available"]}},w=(c,f,N)=>{const k=new Blob([f],{type:N}),A=URL.createObjectURL(k),L=document.createElement("a");L.href=A,L.download=c,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(A)},x=c=>{if(!c||c==="no-analysis-available.mp3")return"audio-analysis";const f=c.lastIndexOf(".");return f>0?c.substring(0,f):c},v=()=>{const c=y(),f=x(c.filename),N=JSON.stringify(c,null,2);w(`${f}-analysis.json`,N,"application/json"),l(!1)},o=()=>{const c=y(),f=x(c.filename),k=[["Property","Value"],["Filename",c.filename],["Genre",c.basicInfo?.genre||"Unknown"],["Mood",c.basicInfo?.mood||"Unknown"],["BPM",c.basicInfo?.bpm||0],["Quality Score",c.quality?.overall||0],["Duration",c.duration||0]].map(A=>A.join(",")).join(`
`);w(`${f}-analysis.csv`,k,"text/csv"),l(!1)},g=async()=>{const c=y(),f=`Audio Analysis Summary:
Filename: ${c.filename}
Genre: ${c.basicInfo?.genre||"Unknown"}
Mood: ${c.basicInfo?.mood||"Unknown"}
BPM: ${c.basicInfo?.bpm||0}
Quality: ${c.quality?.overall||0}/10`;try{await navigator.clipboard.writeText(f),alert("Analysis data copied to clipboard!")}catch(N){console.error("Failed to copy to clipboard:",N)}l(!1)},S=async()=>{try{await navigator.clipboard.writeText(window.location.href),alert("Share link copied to clipboard!")}catch(c){console.error("Failed to copy to clipboard:",c)}b(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"fixed top-0 left-0 w-full z-50 border-b border-slate-800/50",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/95 backdrop-blur-md"}),e.jsx("div",{className:"relative max-w-none px-6",children:e.jsxs("div",{className:"h-16 flex items-center justify-between",children:[e.jsxs("a",{href:"/",className:"group relative",children:[e.jsxs("div",{className:"text-xl font-bold tracking-tight",children:[e.jsx("span",{className:"bg-gradient-to-r from-violet-400 via-purple-400 to-blue-400 bg-clip-text text-transparent",children:"Describe"}),e.jsx("span",{className:"text-white/70 group-hover:text-white/90 transition-colors duration-300",children:"Music"}),e.jsx("span",{className:"text-violet-400/80",children:"."})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-violet-500/20 to-blue-500/20 rounded-lg blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 -z-10"})]}),e.jsxs("nav",{className:"flex items-center gap-4",children:[n&&e.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>l(!u),className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm text-slate-400 hover:text-white border border-slate-700 rounded-md hover:border-slate-600 transition-all duration-300",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export",e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-slate-800/95 backdrop-blur-md border border-slate-700 rounded-lg shadow-xl z-50",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("button",{onClick:v,className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-md transition-all duration-200",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export as JSON"]}),e.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-md transition-all duration-200",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Export as CSV"]}),e.jsx("hr",{className:"my-2 border-slate-600"}),e.jsxs("button",{onClick:g,className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-md transition-all duration-200",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy to Clipboard"]})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>b(!m),className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm text-slate-400 hover:text-white border border-slate-700 rounded-md hover:border-slate-600 transition-all duration-300",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),"Share",e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),m&&e.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-slate-800/95 backdrop-blur-md border border-slate-700 rounded-lg shadow-xl z-50",children:e.jsx("div",{className:"p-2",children:e.jsxs("button",{onClick:S,className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-md transition-all duration-200",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Copy Share Link"]})})})]})]}),e.jsx($,{}),e.jsx("button",{className:"md:hidden p-2 text-slate-400 hover:text-white rounded-md hover:bg-slate-800 transition-all duration-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]})})]}),(d||u||m)&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>{h(!1),l(!1),b(!1)}})]})}function ee({selectedRecordId:s,onSelectRecord:t,onNewAnalysis:a}){const[i,r]=j.useState([]),[d,h]=j.useState(!1),[n,p]=j.useState(!1),[u,l]=j.useState(!0),{user:m}=T();j.useEffect(()=>{b()},[m]);const b=async()=>{l(!0);try{const o=await H.getCurrentUserHistory();r(o)}catch(o){console.error("Error loading history:",o);const g=H.getHistory();r(g)}finally{l(!1)}},y=()=>{m?H.clearUserHistory(m.id):H.clearHistory(),r([]),h(!1),a()},w=(o,g)=>{g.stopPropagation(),H.removeRecord(o),b(),o===s&&a()},x=o=>{const g=new Date(o),c=new Date().getTime()-g.getTime(),f=Math.floor(c/(1e3*60)),N=Math.floor(c/(1e3*60*60)),k=Math.floor(c/(1e3*60*60*24));return f<1?"Now":f<60?`${f}m`:N<24?`${N}h`:k<7?`${k}d`:g.toLocaleDateString("en-US",{month:"short",day:"numeric"})},v=o=>({Electronic:"bg-violet-500",Rock:"bg-red-500",Pop:"bg-pink-500",Jazz:"bg-blue-500",Classical:"bg-gray-500","Hip Hop":"bg-yellow-500",Country:"bg-green-500"})[o]||"bg-violet-500";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`relative bg-slate-900/50 backdrop-blur-xl border-r border-white/10 flex flex-col transition-all duration-300 ${n?"w-16":"w-80"}`,"data-sidebar":"history","data-state":n?"collapsed":"open",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[!n&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"History"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[e.jsxs("span",{children:[i.length," analysis"]}),m&&e.jsx("span",{className:"px-2 py-1 bg-violet-500/20 text-violet-300 rounded-full",children:"Synced"}),!m&&i.length>0&&e.jsx("span",{className:"px-2 py-1 bg-orange-500/20 text-orange-300 rounded-full",children:"Local"})]})]}),e.jsx("button",{onClick:()=>p(!n),className:"p-2 text-slate-400 hover:text-white rounded-lg hover:bg-white/5 transition-all duration-300",children:e.jsx("svg",{className:`w-4 h-4 transition-transform duration-300 ${n?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})]})}),!n&&e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("button",{onClick:a,className:"w-full inline-flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-violet-500 to-blue-500 rounded-lg hover:from-violet-600 hover:to-blue-600 transition-all duration-300",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"New Analysis"]}),i.length>0&&e.jsxs("button",{onClick:()=>h(!0),className:"w-full inline-flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-red-300 border border-red-400/30 rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Clear All"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:u?e.jsx("div",{className:`p-4 text-center ${n?"hidden":""}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-400 text-sm",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-violet-400 border-t-transparent rounded-full animate-spin"}),"Loading history..."]})}):i.length===0?e.jsxs("div",{className:`p-4 text-center ${n?"hidden":""}`,children:[e.jsx("div",{className:"text-slate-400 text-sm",children:m?"No analysis history yet":"No local history yet"}),!m&&e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Sign in to sync your history across devices"})]}):e.jsx("div",{className:"space-y-1 p-2",children:i.map(o=>e.jsx("div",{className:`
                    group cursor-pointer p-3 rounded-lg transition-all duration-300 relative
                    ${s===o.id?"bg-violet-500/20 border border-violet-400/30":"hover:bg-white/5 border border-transparent hover:border-white/10"}
                    ${n?"mx-1":""}
                  `,"data-history-item":s===o.id?"selected":"unselected",children:e.jsx("div",{onClick:()=>t(o),className:"cursor-pointer",children:n?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${v(o.basicInfo.genre)}`,children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"})})}),s===o.id&&e.jsx("div",{className:"w-2 h-2 bg-violet-400 rounded-full mt-1"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${v(o.basicInfo.genre)}`,children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-medium text-white text-sm truncate group-hover:text-white/95 transition-colors",children:o.filename}),e.jsxs("p",{className:"text-xs text-slate-400 mt-0.5",children:[Math.floor(o.duration/60),":",(o.duration%60).toString().padStart(2,"0")," • ",x(o.timestamp)]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:g=>{g.stopPropagation(),window.open(`/analysis/${o.id}`,"_blank")},className:"opacity-0 group-hover:opacity-100 p-1 text-slate-400 hover:text-violet-400 transition-all duration-300 flex-shrink-0",title:"Open in new tab",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),e.jsx("button",{onClick:g=>w(o.id,g),className:"opacity-0 group-hover:opacity-100 p-1 text-slate-400 hover:text-red-400 transition-all duration-300 flex-shrink-0",title:"Delete record",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),o.thumbnail&&e.jsx("div",{className:"h-8 bg-white/5 rounded overflow-hidden mb-2",children:e.jsx("img",{src:o.thumbnail,alt:"Waveform",className:"w-full h-full object-cover opacity-60 group-hover:opacity-80 transition-opacity"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-400",children:"Genre"}),e.jsx("span",{className:"text-xs text-white font-medium",children:o.basicInfo.genre})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-400",children:"BPM"}),e.jsx("span",{className:"text-xs text-white font-medium",children:o.basicInfo.bpm})]})]}),s===o.id&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-violet-400 to-blue-400 rounded-r"})]})})},o.id))})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"glass-pane p-8 max-w-md mx-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Clear All History?"}),e.jsxs("p",{className:"text-slate-300 mb-6",children:["This will permanently delete all ",i.length," analysis records. This action cannot be undone."]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:y,className:"flex-1 px-4 py-2 bg-red-500/20 text-red-300 border border-red-400/30 rounded-lg hover:bg-red-500/30 transition-all duration-300",children:"Clear All"}),e.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 bg-white/5 text-white border border-white/10 rounded-lg hover:bg-white/10 transition-all duration-300",children:"Cancel"})]})]})})]})}export{Z as A,X as D,H,ee as a};
