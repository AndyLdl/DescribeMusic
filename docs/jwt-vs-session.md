# JWT vs 传统 Session 对比

## 传统 Session 认证

```
用户登录 → 服务器生成SessionID → 存储在服务器内存/数据库 → 返回给客户端
客户端请求 → 携带SessionID → 服务器查询Session → 验证有效性
```

### 传统Session的问题：
- ❌ **服务器状态**：需要存储session数据
- ❌ **扩展性差**：多服务器需要共享session
- ❌ **内存消耗**：大量用户时占用大量内存
- ❌ **单点故障**：session存储故障影响所有用户

## JWT 认证

```
用户登录 → Firebase生成JWT → 签名后返回给客户端
客户端请求 → 携带JWT → 服务器验证签名 → 直接从token获取用户信息
```

### JWT的优势：
- ✅ **无状态**：服务器不需要存储任何信息
- ✅ **可扩展**：任何服务器都能验证token
- ✅ **性能好**：只需要验证签名，不需要数据库查询
- ✅ **分布式友好**：微服务架构的理想选择

## 安全性对比

| 方面 | 传统Session | JWT |
|------|-------------|-----|
| 伪造难度 | 中等（需要猜测SessionID） | 极高（需要私钥） |
| 篡改检测 | 无（SessionID本身无内容） | 有（签名验证） |
| 过期控制 | 服务器控制 | Token内置 |
| 撤销能力 | 容易（删除session） | 较难（需要黑名单） |
| 网络传输 | 小（只有ID） | 大（包含用户信息） |

## 为什么Firebase选择JWT？

1. **全球分布**：Firebase是全球服务，JWT无状态特性完美适配
2. **微服务架构**：不同服务都能独立验证token
3. **离线验证**：不需要联网查询，提高性能
4. **标准化**：JWT是行业标准，兼容性好