# Lemonsqueezy äº§å“å˜ä½“è®¾ç½®æŒ‡å—

## æ¦‚è¿°

æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜å¦‚ä½•åœ¨ Lemonsqueezy ä¸­åˆ›å»ºå’Œé…ç½®éŸ³ä¹åˆ†æåº”ç”¨çš„ç§¯åˆ†å¥—é¤äº§å“å˜ä½“ã€‚

## ğŸ¯ äº§å“å˜ä½“è§„åˆ’

### å˜ä½“æ¶æ„
æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªä¸»äº§å“ï¼Œç„¶ååœ¨å…¶ä¸‹åˆ›å»ºä¸‰ä¸ªå˜ä½“ï¼ˆå¥—é¤ï¼‰ï¼š

```
éŸ³ä¹åˆ†æç§¯åˆ†å¥—é¤ (ä¸»äº§å“)
â”œâ”€â”€ åŸºç¡€å¥—é¤ (Basic) - $9.9 / 2000ç§¯åˆ†
â”œâ”€â”€ ä¸“ä¸šå¥—é¤ (Pro) - $19.9 / 4000ç§¯åˆ†
â””â”€â”€ é«˜çº§å¥—é¤ (Premium) - $29.9 / 6000ç§¯åˆ†
```

## ğŸ“‹ è¯¦ç»†å˜ä½“é…ç½®

### 1. åŸºç¡€å¥—é¤ (Basic Plan)

**åŸºæœ¬ä¿¡æ¯**
- **åç§°**: åŸºç¡€å¥—é¤ / Basic Plan
- **ä»·æ ¼**: $9.90 USD
- **ç§¯åˆ†æ•°é‡**: 2000 ç§¯åˆ†
- **ç›®æ ‡ç”¨æˆ·**: è½»åº¦ä½¿ç”¨è€…

**äº§å“æè¿°**
```
ğŸµ Basic Plan - Music Analysis Credits

âœ¨ What's Included:
â€¢ 2,000 credits (~33 minutes of audio analysis)
â€¢ Support for all audio formats (MP3, WAV, FLAC, etc.)
â€¢ Detailed music analysis reports
â€¢ Basic customer support

ğŸ’¡ Perfect For:
â€¢ Occasional music analysis users
â€¢ Personal music enthusiasts
â€¢ Small-scale music projects

â±ï¸ How It Works:
â€¢ 1 credit = 1 second of audio analysis
â€¢ Credits never expire
â€¢ Purchase additional credits anytime
```

**å˜ä½“è®¾ç½®**
- **SKU**: `music-analysis-basic-2000`
- **åº“å­˜**: æ— é™åˆ¶
- **æ•°å­—äº§å“**: æ˜¯
- **å³æ—¶äº¤ä»˜**: æ˜¯

### 2. ä¸“ä¸šå¥—é¤ (Pro Plan)

**åŸºæœ¬ä¿¡æ¯**
- **åç§°**: ä¸“ä¸šå¥—é¤ / Pro Plan  
- **ä»·æ ¼**: $19.90 USD
- **ç§¯åˆ†æ•°é‡**: 4000 ç§¯åˆ†
- **ç›®æ ‡ç”¨æˆ·**: ä¸“ä¸šç”¨æˆ·
- **æ¨èæ ‡ç­¾**: â­ æœ€å—æ¬¢è¿

**äº§å“æè¿°**
```
ğŸµ Pro Plan - Music Analysis Credits â­ Most Popular

âœ¨ What's Included:
â€¢ 4,000 credits (~67 minutes of audio analysis)
â€¢ Support for all audio formats (MP3, WAV, FLAC, etc.)
â€¢ Detailed music analysis reports
â€¢ Priority customer support
â€¢ Batch analysis features

ğŸ’¡ Perfect For:
â€¢ Music producers and composers
â€¢ Music educators
â€¢ Medium-scale music projects
â€¢ Regular music analysis users

â±ï¸ How It Works:
â€¢ 1 credit = 1 second of audio analysis
â€¢ Credits never expire
â€¢ Save $0.10 compared to Basic plan per credit
â€¢ Purchase additional credits anytime

ğŸ Extra Value:
â€¢ Save equivalent of 2,000 credits compared to individual purchases
â€¢ Priority technical support
```

**å˜ä½“è®¾ç½®**
- **SKU**: `music-analysis-pro-4000`
- **åº“å­˜**: æ— é™åˆ¶
- **æ•°å­—äº§å“**: æ˜¯
- **å³æ—¶äº¤ä»˜**: æ˜¯
- **æ¨èæ ‡ç­¾**: æ·»åŠ "Popular"æˆ–"Best Value"æ ‡ç­¾

### 3. é«˜çº§å¥—é¤ (Premium Plan)

**åŸºæœ¬ä¿¡æ¯**
- **åç§°**: é«˜çº§å¥—é¤ / Premium Plan
- **ä»·æ ¼**: $29.90 USD
- **ç§¯åˆ†æ•°é‡**: 6000 ç§¯åˆ†
- **ç›®æ ‡ç”¨æˆ·**: é‡åº¦ä½¿ç”¨è€…

**äº§å“æè¿°**
```
ğŸµ Premium Plan - Music Analysis Credits

âœ¨ What's Included:
â€¢ 6,000 credits (~100 minutes of audio analysis)
â€¢ Support for all audio formats (MP3, WAV, FLAC, etc.)
â€¢ Detailed music analysis reports
â€¢ Dedicated customer support
â€¢ Batch analysis features
â€¢ API access (coming soon)

ğŸ’¡ Perfect For:
â€¢ Professional music studios
â€¢ Music technology companies
â€¢ Large-scale music projects
â€¢ Music research institutions

â±ï¸ How It Works:
â€¢ 1 credit = 1 second of audio analysis
â€¢ Credits never expire
â€¢ Save $0.20 compared to Basic plan per credit
â€¢ Purchase additional credits anytime

ğŸ Extra Value:
â€¢ Save equivalent of 4,000 credits compared to individual purchases
â€¢ Dedicated technical support
â€¢ Early access to new features
â€¢ API access (coming soon)
```

**å˜ä½“è®¾ç½®**
- **SKU**: `music-analysis-premium-6000`
- **åº“å­˜**: æ— é™åˆ¶
- **æ•°å­—äº§å“**: æ˜¯
- **å³æ—¶äº¤ä»˜**: æ˜¯

## ğŸ› ï¸ Lemonsqueezy è®¾ç½®æ­¥éª¤

> ğŸ“– **è¯¦ç»†æ“ä½œæŒ‡å—**: è¯·å‚è€ƒ `docs/lemonsqueezy-step-by-step-setup.md` è·å–å®Œæ•´çš„å›¾æ–‡æ“ä½œæ­¥éª¤ã€‚

### æ­¥éª¤ 1: åˆ›å»ºä¸»äº§å“

1. ç™»å½• [Lemonsqueezy Dashboard](https://app.lemonsqueezy.com)
2. è¿›å…¥ **Products** é¡µé¢
3. ç‚¹å‡» **Create Product**
4. å¡«å†™äº§å“ä¿¡æ¯ï¼š
   - **Product Name**: Music Analysis Credit Plans
   - **Description**: Credit packages for music analysis application
   - **Category**: Digital Products / Software
   - **Status**: Published

### æ­¥éª¤ 2: åˆ›å»ºå˜ä½“

å¯¹æ¯ä¸ªå¥—é¤é‡å¤ä»¥ä¸‹æ­¥éª¤ï¼š

1. åœ¨äº§å“é¡µé¢ç‚¹å‡» **Add Variant**
2. å¡«å†™å˜ä½“ä¿¡æ¯ï¼š
   - **Variant Name**: [å¥—é¤åç§°]
   - **Price**: [å¯¹åº”ä»·æ ¼]
   - **Description**: [ä½¿ç”¨ä¸Šé¢çš„äº§å“æè¿°]
3. è®¾ç½®å˜ä½“é€‰é¡¹ï¼š
   - **SKU**: [ä½¿ç”¨ä¸Šé¢çš„SKU]
   - **Inventory**: Unlimited
   - **Digital Product**: Yes
   - **Instant Delivery**: Yes
4. ä¿å­˜å˜ä½“å¹¶è®°å½• **Variant ID**

### æ­¥éª¤ 3: é…ç½®ç§¯åˆ†æ˜ å°„

ç”±äº Lemonsqueezy å˜ä½“æ²¡æœ‰è‡ªå®šä¹‰æ•°æ®å­—æ®µï¼Œæˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æ–¹å¼å¤„ç†ç§¯åˆ†ä¿¡æ¯ï¼š

1. **å‰ç«¯é…ç½®**: åœ¨ `src/services/lemonsqueezyService.ts` ä¸­é…ç½®å¥—é¤ä¿¡æ¯
2. **Webhook æ˜ å°„**: åœ¨äº‘å‡½æ•°ä¸­é€šè¿‡å˜ä½“ ID æ˜ å°„ç§¯åˆ†æ•°é‡
3. **ç¯å¢ƒå˜é‡**: å°†å˜ä½“ ID ä¿å­˜åˆ°ç¯å¢ƒå˜é‡ä¸­

**ç§¯åˆ†æ˜ å°„é…ç½®**ï¼ˆå·²åœ¨ä»£ç ä¸­å®ç°ï¼‰ï¼š
```typescript
const variantCreditsMap = {
  'basic_variant_id': 2000,
  'pro_variant_id': 4000, 
  'premium_variant_id': 6000
};
```

### æ­¥éª¤ 4: è®¾ç½® Webhook

1. è¿›å…¥ **Settings** > **Webhooks**
2. ç‚¹å‡» **Add Webhook**
3. é…ç½® Webhookï¼š
   - **URL**: `https://your-project.cloudfunctions.net/lemonsqueezyWebhook`
   - **Events**: é€‰æ‹©ä»¥ä¸‹äº‹ä»¶
     - âœ… `order_created`
     - âœ… `subscription_created`
     - âœ… `subscription_updated`
     - âœ… `subscription_cancelled`
     - âœ… `subscription_resumed`
     - âœ… `subscription_expired`
     - âœ… `subscription_paused`
     - âœ… `subscription_unpaused`
4. ç”Ÿæˆå¹¶ä¿å­˜ **Webhook Secret**

## ğŸ“ å˜ä½“ ID è®°å½•è¡¨

åˆ›å»ºå®Œæˆåï¼Œè®°å½•æ¯ä¸ªå˜ä½“çš„ IDï¼š

| Plan Name | Price | Credits | Variant ID | Environment Variable |
|-----------|-------|---------|------------|---------------------|
| Basic Plan | $9.9 | 2000 | `[Record ID]` | `VITE_LEMONSQUEEZY_BASIC_VARIANT_ID` |
| Pro Plan | $19.9 | 4000 | `[Record ID]` | `VITE_LEMONSQUEEZY_PRO_VARIANT_ID` |
| Premium Plan | $29.9 | 6000 | `[Record ID]` | `VITE_LEMONSQUEEZY_PREMIUM_VARIANT_ID` |

## ğŸ¨ è¥é”€å»ºè®®

### Value Proposition Highlights
- **Basic Plan**: Emphasize "Perfect for beginners" and "Great value"
- **Pro Plan**: Highlight "Most popular" and "Best value"
- **Premium Plan**: Emphasize "Professional grade" and "Full featured"

### Pricing Strategy
- Set Pro Plan as "Recommended" option
- Highlight savings compared to individual purchases
- Emphasize that credits never expire

### User Guidance
- Recommend appropriate plans for different user types
- Provide usage scenario examples
- Emphasize upgrade convenience

## ğŸ”§ æµ‹è¯•éªŒè¯

### æµ‹è¯•æ¨¡å¼è®¾ç½®
1. åœ¨ Lemonsqueezy ä¸­å¯ç”¨ **Test Mode**
2. ä½¿ç”¨æµ‹è¯•ä¿¡ç”¨å¡è¿›è¡Œæ”¯ä»˜æµ‹è¯•ï¼š
   - **æˆåŠŸ**: `4242 4242 4242 4242`
   - **å¤±è´¥**: `4000 0000 0000 0002`
3. éªŒè¯ Webhook æ˜¯å¦æ­£ç¡®è§¦å‘
4. æ£€æŸ¥ç§¯åˆ†æ˜¯å¦æ­£ç¡®å‘æ”¾

### éªŒè¯æ¸…å•
- [ ] ä¸‰ä¸ªå˜ä½“éƒ½å·²åˆ›å»ºå¹¶å‘å¸ƒ
- [ ] ä»·æ ¼å’Œç§¯åˆ†æ•°é‡æ­£ç¡®
- [ ] äº§å“æè¿°æ¸…æ™°å¸å¼•äºº
- [ ] Webhook é…ç½®æ­£ç¡®
- [ ] æµ‹è¯•æ”¯ä»˜æµç¨‹æ­£å¸¸
- [ ] ç§¯åˆ†å‘æ”¾æœºåˆ¶å·¥ä½œæ­£å¸¸

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨è®¾ç½®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. **Lemonsqueezy æ–‡æ¡£**: https://docs.lemonsqueezy.com/
2. **Webhook æµ‹è¯•å·¥å…·**: ä½¿ç”¨ ngrok è¿›è¡Œæœ¬åœ°æµ‹è¯•
3. **æ—¥å¿—æ£€æŸ¥**: æŸ¥çœ‹äº‘å‡½æ•°æ—¥å¿—ç¡®è®¤ Webhook å¤„ç†
4. **æµ‹è¯•å·¥å…·**: ä½¿ç”¨ Postman æµ‹è¯• API è°ƒç”¨

å®Œæˆè¿™äº›è®¾ç½®åï¼Œä½ çš„ç§¯åˆ†å¥—é¤å°±å¯ä»¥åœ¨åº”ç”¨ä¸­æ­£å¸¸é”€å”®äº†ï¼