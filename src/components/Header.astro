---
import { Icon } from "astro-icon/components";
import Link from "./ui/link.astro";
---

<header class="fixed top-0 left-0 w-full z-50">
  <!-- Enhanced glassmorphism background -->
  <div
    class="absolute top-0 left-0 w-full h-full bg-gradient-to-r from-slate-900/40 via-slate-800/30 to-slate-900/40 backdrop-blur-2xl border-b border-white/5">
  </div>

  <!-- Subtle gradient overlay for depth -->
  <div
    class="absolute top-0 left-0 w-full h-full bg-gradient-to-b from-white/[0.02] to-transparent">
  </div>

  <div class="relative max-w-7xl mx-auto px-6">
    <div class="h-20 flex items-center justify-between">
      <!-- Enhanced brand logo with gradient -->
      <a href="/" class="group relative">
        <div class="text-2xl font-bold tracking-tight">
          <span
            class="bg-gradient-to-r from-violet-400 via-purple-400 to-blue-400 bg-clip-text text-transparent">
            Describe
          </span>
          <span
            class="text-white/70 group-hover:text-white/90 transition-colors duration-300">
            Music
          </span>
          <span class="text-violet-400/80">.</span>
        </div>
        <!-- Subtle glow effect on hover -->
        <div
          class="absolute inset-0 bg-gradient-to-r from-violet-500/20 to-blue-500/20 rounded-lg blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 -z-10">
        </div>
      </a>

      <!-- Desktop navigation -->
      <nav class="hidden md:flex items-center gap-6">
        <!-- Product -->
        <a
          href="/analyze/"
          class="relative text-slate-300/90 hover:text-white transition-all duration-300 group">
          <span class="relative z-10">Music Analyzer</span>
          <div
            class="absolute inset-x-0 -bottom-1 h-px bg-gradient-to-r from-violet-400 to-blue-400 scale-x-0 group-hover:scale-x-100 transition-transform duration-300">
          </div>
        </a>

        <!-- Resources dropdown -->
        <div class="relative group">
          <button
            class="relative text-slate-300/90 hover:text-white transition-all duration-300 flex items-center gap-1">
            <span class="relative z-10">Resources</span>
            <Icon
              name="heroicons:chevron-down-20-solid"
              class="w-3 h-3 transition-transform group-hover:rotate-180"
            />
            <div
              class="absolute inset-x-0 -bottom-1 h-px bg-gradient-to-r from-violet-400 to-blue-400 scale-x-0 group-hover:scale-x-100 transition-transform duration-300">
            </div>
          </button>

          <!-- Resources dropdown menu -->
          <div
            class="absolute top-full left-0 mt-2 w-56 bg-slate-800/95 backdrop-blur-md border border-slate-700 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <div class="p-2">
              <a
                href="/pricing"
                class="flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-md transition-all duration-200">
                <Icon
                  name="heroicons:tag-20-solid"
                  class="w-4 h-4 text-orange-400"
                />
                <div>
                  <div class="font-medium">Pricing</div>
                  <div class="text-xs text-slate-500">Launch special</div>
                </div>
              </a>
              <a
                href="/blog/"
                class="flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-md transition-all duration-200">
                <Icon
                  name="heroicons:document-text-20-solid"
                  class="w-4 h-4 text-violet-400"
                />
                <div>
                  <div class="font-medium">Blog</div>
                  <div class="text-xs text-slate-500">Tutorials & insights</div>
                </div>
              </a>
              <a
                href="/about/"
                class="flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-md transition-all duration-200">
                <Icon
                  name="heroicons:information-circle-20-solid"
                  class="w-4 h-4 text-blue-400"
                />
                <div>
                  <div class="font-medium">About</div>
                  <div class="text-xs text-slate-500">Our technology</div>
                </div>
              </a>
              <a
                href="/contact/"
                class="flex items-center gap-3 px-3 py-2 text-sm text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-md transition-all duration-200">
                <Icon
                  name="heroicons:envelope-20-solid"
                  class="w-4 h-4 text-green-400"
                />
                <div>
                  <div class="font-medium">Contact</div>
                  <div class="text-xs text-slate-500">Get support</div>
                </div>
              </a>
            </div>
          </div>
        </div>

        <!-- Enhanced CTA button -->
        <a
          href="/analyze/"
          class="relative inline-flex items-center justify-center gap-2 px-6 py-2.5 text-sm font-medium text-white bg-gradient-to-r from-violet-500 to-blue-500 rounded-full hover:from-violet-600 hover:to-blue-600 transition-all duration-300 group overflow-hidden shadow-lg hover:shadow-violet-500/25">
          <!-- Button content -->
          <span class="relative z-10">Try Free</span>
          <Icon
            name="heroicons:arrow-right-20-solid"
            class="relative z-10 w-4 h-4 transition-transform group-hover:translate-x-0.5"
          />

          <!-- Subtle shine effect -->
          <div
            class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700">
          </div>
        </a>
      </nav>

      <!-- Mobile menu button -->
      <div class="md:hidden">
        <button
          id="mobile-menu-button"
          class="relative p-2 text-white/80 hover:text-white transition-colors duration-300 group">
          <Icon name="heroicons:bars-3-20-solid" class="w-6 h-6" />
          <!-- Subtle background on hover -->
          <div
            class="absolute inset-0 bg-white/5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300">
          </div>
        </button>
      </div>
    </div>

    <!-- Mobile menu -->
    <div
      id="mobile-menu"
      class="md:hidden absolute top-full left-0 w-full bg-slate-900/95 backdrop-blur-md border-b border-slate-800/50 opacity-0 invisible transform -translate-y-2 transition-all duration-300">
      <div class="px-6 py-4 space-y-3">
        <a
          href="/analyze/"
          class="block px-3 py-2 text-slate-300 hover:text-white hover:bg-slate-800/50 rounded-md transition-all duration-200">
          Audio Analysis
        </a>

        <!-- Features -->
        <a
          href="/#features"
          class="block px-3 py-2 text-slate-300 hover:text-white hover:bg-slate-800/50 rounded-md transition-all duration-200">
          Features
        </a>

        <!-- Resources section -->
        <div class="space-y-2">
          <div
            class="px-3 py-1 text-sm font-medium text-slate-400 uppercase tracking-wide">
            Resources
          </div>
          <a
            href="/blog"
            class="block px-6 py-2 text-slate-300 hover:text-white hover:bg-slate-800/50 rounded-md transition-all duration-200 text-sm">
            Blog
          </a>
          <a
            href="/about"
            class="block px-6 py-2 text-slate-300 hover:text-white hover:bg-slate-800/50 rounded-md transition-all duration-200 text-sm">
            About
          </a>
          <a
            href="/contact"
            class="block px-6 py-2 text-slate-300 hover:text-white hover:bg-slate-800/50 rounded-md transition-all duration-200 text-sm">
            Contact
          </a>
        </div>

        <a
          href="/pricing"
          class="block px-3 py-2 text-slate-300 hover:text-white hover:bg-slate-800/50 rounded-md transition-all duration-200">
          Pricing
        </a>

        <!-- CTA button for mobile -->
        <div class="pt-4 border-t border-slate-800">
          <a
            href="/analyze/"
            class="block w-full text-center px-6 py-3 bg-gradient-to-r from-violet-500 to-blue-500 text-white rounded-lg hover:from-violet-600 hover:to-blue-600 transition-all duration-300 font-medium">
            Try Free Now
          </a>
        </div>
      </div>
    </div>
  </div>
</header>

<style>
  /* Custom gradient animation for brand logo */
  @keyframes gradient-shift {
    0%,
    100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  header a[href="/"]:hover span:first-child {
    background-size: 200% 200%;
    animation: gradient-shift 3s ease infinite;
  }
</style>

<script>
  // Mobile menu functionality
  document.addEventListener("DOMContentLoaded", function () {
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");

    if (mobileMenuButton && mobileMenu) {
      mobileMenuButton.addEventListener("click", function () {
        const isVisible = !mobileMenu.classList.contains("invisible");

        if (isVisible) {
          // Hide menu
          mobileMenu.classList.add("opacity-0", "invisible", "-translate-y-2");
        } else {
          // Show menu
          mobileMenu.classList.remove(
            "opacity-0",
            "invisible",
            "-translate-y-2"
          );
        }
      });

      // Close menu when clicking outside
      document.addEventListener("click", function (event) {
        if (
          !mobileMenuButton.contains(event.target) &&
          !mobileMenu.contains(event.target)
        ) {
          mobileMenu.classList.add("opacity-0", "invisible", "-translate-y-2");
        }
      });

      // Close menu when clicking on menu items
      const menuItems = mobileMenu.querySelectorAll("a");
      menuItems.forEach((item) => {
        item.addEventListener("click", function () {
          mobileMenu.classList.add("opacity-0", "invisible", "-translate-y-2");
        });
      });
    }
  });
</script>
